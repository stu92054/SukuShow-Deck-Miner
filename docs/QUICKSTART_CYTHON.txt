==============================================================================
Multi Optimizer 2 - Cython åŠ é€Ÿç‰ˆå¿«é€Ÿå…¥é–€
==============================================================================

ğŸ“‹ æª”æ¡ˆåˆ—è¡¨
-----------
cython/optimizer_core.pyx            - Cython æ ¸å¿ƒæ¨¡çµ„ï¼ˆCæ“´å……åŸå§‹ç¢¼ï¼‰
cython/setup.py                      - ç·¨è­¯é…ç½®æª”
cython/build_cython.bat              - Windows ç·¨è­¯è…³æœ¬
cython/build_cython.sh               - Linux/Mac ç·¨è­¯è…³æœ¬
multi_optimizer_2_cython.py          - å„ªåŒ–ç‰ˆä¸»ç¨‹å¼ï¼ˆæ ¹ç›®éŒ„ï¼‰
benchmark_optimizer.py               - æ•ˆèƒ½å°æ¯”æ¸¬è©¦ï¼ˆæ ¹ç›®éŒ„ï¼‰
docs/README_CYTHON.md                - è©³ç´°æ–‡ä»¶


ğŸš€ å¿«é€Ÿé–‹å§‹ï¼ˆ3æ­¥ï¼‰
-----------------

ç¬¬ 1 æ­¥ï¼šå®‰è£ä¾è³´
    pip install cython

    Windows: å®‰è£ Visual Studio Build Tools
             https://visualstudio.microsoft.com/downloads/
             é¸æ“‡ "Desktop development with C++"

    Linux:   sudo apt-get install build-essential python3-dev
    macOS:   xcode-select --install


ç¬¬ 2 æ­¥ï¼šç·¨è­¯æ¨¡çµ„
    Windows:
        cd cython
        build_cython.bat
        cd ..

    Linux/Mac:
        cd cython
        chmod +x build_cython.sh
        ./build_cython.sh
        cd ..

    æˆ–æ‰‹å‹•ç·¨è­¯:
        cd cython
        python setup.py build_ext --inplace
        cd ..


ç¬¬ 3 æ­¥ï¼šåŸ·è¡Œå„ªåŒ–
    python multi_optimizer_2_cython.py


âœ… ç·¨è­¯æˆåŠŸæ¨™èªŒ
--------------
çœ‹åˆ°ä»¥ä¸‹æª”æ¡ˆèªªæ˜ç·¨è­¯æˆåŠŸï¼ˆåœ¨ cython/ ç›®éŒ„ä¸­ï¼‰ï¼š
  Windows: cython/optimizer_core.cp311-win_amd64.pyd (æª”åä¸­çš„æ•¸å­—æ˜¯Pythonç‰ˆæœ¬)
  Linux:   cython/optimizer_core.cpython-311-x86_64-linux-gnu.so
  macOS:   cython/optimizer_core.cpython-311-darwin.so


ğŸ“Š æ•ˆèƒ½æ¸¬è©¦
----------
å°æ¯” Python åŸç‰ˆå’Œ Cython ç‰ˆæœ¬ï¼š
    python benchmark_optimizer.py

è‡ªè¨‚æ¸¬è©¦åƒæ•¸ï¼š
    python benchmark_optimizer.py --top-n 3000 --runs 5


ğŸ¯ ä½¿ç”¨å»ºè­°
----------
1. TOP_N è¶Šå¤§ï¼ŒåŠ é€Ÿæ•ˆæœè¶Šæ˜é¡¯
2. é¦–æ¬¡ä½¿ç”¨å»ºè­° TOP_N=1000 é€²è¡Œæ¸¬è©¦
3. ç¢ºèªç„¡èª¤å¾Œå¯æé«˜åˆ° 5000 æˆ–æ›´é«˜


âš™ï¸ é…ç½®é¸é …
-----------
åœ¨ multi_optimizer_2_cython.py ä¸­ä¿®æ”¹ï¼š

CHALLENGE_SONGS = [
    ("405121", "02"),  # æ­Œæ›²IDå’Œé›£åº¦
    ("405107", "02"),
]

TOP_N = 5000  # æ¯é¦–æ­Œä¿ç•™çš„å¡çµ„æ•¸é‡


ğŸ› å¸¸è¦‹å•é¡Œ
----------

å•ï¼šç·¨è­¯å¤±æ•— - æ‰¾ä¸åˆ° MSVC
ç­”ï¼šå®‰è£ Visual Studio Build Tools
    https://visualstudio.microsoft.com/downloads/

å•ï¼šImportError: No module named 'optimizer_core'
ç­”ï¼šç·¨è­¯æœªæˆåŠŸï¼Œé‡æ–°åŸ·è¡Œï¼š
    Windows: cython\build_cython.bat
    Linux/Mac: cython/build_cython.sh
    æˆ–æª¢æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦åŒ¹é…ï¼ˆç·¨è­¯å’ŒåŸ·è¡Œæ™‚å¿…é ˆä½¿ç”¨ç›¸åŒç‰ˆæœ¬ï¼‰

å•ï¼šåŸ·è¡Œæ™‚å´©æ½°
ç­”ï¼š1. æ¸›å° TOP_N å€¼
    2. æª¢æŸ¥ JSON è³‡æ–™æª”æ¡ˆæ˜¯å¦å®Œæ•´
    3. ç¢ºä¿å¡ç‰Œæ•¸é‡ <= 64

å•ï¼šPython ç‰ˆæœ¬ä¸åŒ¹é…
ç­”ï¼šç·¨è­¯çš„ .pyd æª”æ¡ˆåç¨±åŒ…å«ç‰ˆæœ¬è™Ÿï¼ˆå¦‚ cp312 = Python 3.12ï¼‰
    å¿…é ˆä½¿ç”¨ç›¸åŒç‰ˆæœ¬åŸ·è¡Œï¼Œæˆ–ç”¨ç›®æ¨™ç‰ˆæœ¬é‡æ–°ç·¨è­¯


ğŸ“ˆ é æœŸæ•ˆèƒ½
----------
    è³‡æ–™è¦æ¨¡           Python        Cython       åŠ é€Ÿæ¯”
    TOP_N = 1000      5-10ç§’        0.5-1ç§’      10-20x
    TOP_N = 5000      100-200ç§’     5-15ç§’       15-40x
    TOP_N = 10000     600-1000ç§’    30-60ç§’      20-50x

å¯¦éš›æ•ˆèƒ½å–æ±ºæ–¼ CPUã€è³‡æ–™ç‰¹å¾µå’Œå‰ªææ•ˆç‡


ğŸ” åµéŒ¯æ¨¡å¼
----------
é¡¯ç¤ºè©³ç´°çµ±è¨ˆè³‡è¨Šï¼š
    python multi_optimizer_2_cython.py --debug


ğŸ“š æ›´å¤šèªªæ˜
----------
è©³ç´°æ–‡ä»¶è«‹åƒé–±ï¼šdocs/README_CYTHON.md


==============================================================================
ç¥ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰å•é¡Œè«‹æŸ¥çœ‹è©³ç´°æ–‡ä»¶æˆ–æäº¤ Issue
==============================================================================
