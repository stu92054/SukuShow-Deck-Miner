# SukuShow 配置文件生成器

一個簡單易用的網頁工具，讓公會成員輕鬆填寫信息並生成/編輯 SukuShow Deck Miner 的配置文件。

## 功能特色

- ✨ 視覺化表單界面，無需手動編輯 YAML
- 📊 表格式卡片配置，參考 Google Sheets 樣式設計
- 🎴 **智能卡片選擇**：從卡片資料庫自動載入，通過角色和卡片名稱選擇，自動填入 ID
- 🔍 **快速搜尋功能**：角色和卡片欄位支援輸入部分字符進行即時搜尋過濾
- 📤 支援上傳現有配置文件進行編輯
- 🎯 自動生成符合格式的 `member-*.yaml` 配置文件
- 💾 一鍵下載或複製配置到剪貼板
- 🎨 支援拖放上傳文件
- 📱 響應式設計，支援各種螢幕尺寸
- 🔢 最多支援 40 張卡片，並即時顯示卡片數量
- 🔄 卡池與練度整合配置，更直觀易用
- 🔀 降級支援：如果卡片資料庫載入失敗，自動切換為手動輸入模式

## 使用方法

### ⚠️ 重要：使用本地伺服器（必需）

由於瀏覽器的 CORS 安全限制，**必須使用本地伺服器才能正常載入卡片資料庫**。

**推薦方法：使用 Python HTTP 伺服器**

```bash
# 在專案根目錄執行
python -m http.server 8000
```

然後在瀏覽器中訪問：`http://localhost:8000/web/config-generator.html`

**替代方法：從 web 目錄啟動**

```bash
# 進入 web 目錄
cd web

# 啟動伺服器
python -m http.server 8000
```

然後訪問：`http://localhost:8000/config-generator.html`

**注意**：
- 如果直接雙擊 HTML 文件打開，卡片資料庫將無法載入，會自動降級為手動輸入模式
- 使用本地伺服器可以享受完整的智能卡片選擇功能

## 使用指南

### 新建配置文件

1. **填寫基本信息**
   - 輸入成員名稱（例如：alice）
   - 賽季模式固定為 `sukushow`

2. **配置卡池與練度**（智能選擇模式）
   - 在表格中逐行填寫卡片信息（最多 40 張）
   - 每行操作：
     1. **選擇角色**：從下拉選單選擇角色（例如：大賀美 沙知）
        - 💡 **支援搜尋**：可以直接輸入角色名稱的部分字符快速查找
     2. **選擇卡片**：從該角色的卡片列表中選擇（顯示評級和卡片名稱）
        - 💡 **支援搜尋**：可以直接輸入卡片名稱的部分字符快速查找
     3. **卡片 ID 自動填入**：選擇卡片後自動填入 ID
     4. **填寫練度**（選填）：未滿練的卡片填寫等級、中心技能等級、技能等級
   - 滿練的卡片只需選擇卡片，練度欄位留空即可
   - 頂部會顯示已填寫的卡片數量（綠色：正常，黃色：接近上限，紅色：達到上限）
   - **降級模式**：如果卡片資料庫載入失敗，會自動切換為手動輸入卡片 ID 的模式

3. **設定粉絲等級**
   - 為每個角色設定粉絲等級（1-10）
   - 預設為 10

4. **配置歌曲**（最多 3 首）
   - 點擊「添加歌曲」按鈕添加要模擬的歌曲
   - **智能歌曲選擇**：如果歌曲資料庫（`Data/Musics.yaml`）可用，可以從下拉選單搜尋歌曲名稱，自動填入歌曲 ID
   - 選擇難度（Normal/Hard/Expert/Master）
   - 設定 Mastery Lv.（1-50，預設 50）
   - **必須卡片 (All)**：
     - 從下拉選單直接選擇已填寫的卡池中的卡片
     - 所有選中的卡片都必須在最終卡組中
     - 最多 6 張，相同角色最多 2 張
   - **必須卡片 (Any)**：
     - 從下拉選單直接選擇卡片
     - 至少需要其中一張在最終卡組中
     - 無數量限制
   - **開發者選項**（需要勾選才顯示）：
     - 中心覆蓋：指定特定中心技能
     - 顏色覆蓋：強制使用特定顏色（Smile/Pure/Cool）
     - Leader 指定：指定隊長位置（通常保持 0）

5. **下載配置文件**
   - 點擊「下載配置文件」按鈕
   - 文件會自動命名為 `member-[名稱].yaml`
   - 將下載的文件放到專案的 `config/` 目錄中

### 編輯現有配置文件

1. **上傳配置文件**
   - 點擊上傳區域或「上傳配置文件」按鈕
   - 或直接拖放 `.yaml` 文件到上傳區域

2. **編輯內容**
   - 表單會自動填充現有配置
   - 修改需要變更的內容

3. **下載更新後的配置**
   - 點擊「下載配置文件」保存變更

## 配置文件示例

生成的配置文件格式如下：

```yaml
# ============================================
# 公會成員配置 - alice
# ============================================

output:
  base_dir: output
  enable_isolation: true

songs:
  - music_id: '405117'
    difficulty: '02'
    mastery_level: 50
    mustcards_all: []
    mustcards_any: []
    center_override: null
    color_override: null
    leader_designation: '0'

card_ids:
  - 1011501
  - 1021701
  - 1022901

season_mode: sukushow

fan_levels:
  1011: 5
  1021: 3
  1022: 10

card_levels:
  1011501:
    - 120
    - 10
    - 10

batch_size: 1000000
num_processes: null

cache:
  max_fingerprints_in_memory: 5000000
  auto_cleanup: true
  max_cache_age_days: 7
```

## 執行模擬

配置文件生成後，使用以下命令執行模擬：

```bash
python MainBatch.py --config config/member-alice.yaml
```

## 技術說明

- **前端技術**: HTML5, CSS3, JavaScript (ES6+)
- **YAML 處理**: js-yaml 4.1.0（通過 CDN 載入）
- **無需後端**: 完全在瀏覽器中運行，無需伺服器
- **瀏覽器要求**: 現代瀏覽器（Chrome, Firefox, Edge, Safari）

## 常見問題

### Q: 為什麼上傳文件後某些欄位沒有填充？

A: 請確保上傳的是有效的 YAML 文件，且格式符合專案要求。檢查瀏覽器控制台是否有錯誤訊息。

### Q: 可以同時管理多個成員的配置嗎？

A: 可以。為每個成員填寫表單並下載不同的配置文件（例如：`member-alice.yaml`, `member-bob.yaml`）。

### Q: 卡片 ID 在哪裡查看？

A: 請參考專案中的卡片資料庫或遊戲內的卡片資訊。

### Q: 下載的配置文件放在哪裡？

A: 將下載的 `member-*.yaml` 文件放在專案根目錄的 `config/` 資料夾中。

## 貢獻與回饋

如有問題或建議，請提交 Issue 或 Pull Request。

## 授權

本工具隨 SukuShow Deck Miner 專案一同發布，遵循相同的授權協議。
 
